<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>VR –ò–≥—Ä–∞: –°–±–æ—Ä –æ–±—ä–µ–∫—Ç–æ–≤</title>
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
</head>
<body>
    <a-scene>
        <!-- –°–∫–∞–π–±–æ–∫—Å –∏–∑ —Ñ–∞–π–ª–∞ sky.jpg -->
        <a-sky src="sky.jpg"></a-sky>
        
        <!-- –ü–æ–ª -->
        <a-plane 
            position="0 0 0" 
            rotation="-90 0 0" 
            width="50" 
            height="50" 
            color="#7CFC00"
        ></a-plane>
        
        <!-- –ò–≥—Ä–æ–∫ -->
        <a-entity id="player" position="0 1.6 0">
            <a-camera look-controls="pointerLockEnabled: true" wasd-controls="fly: false">
                <a-cursor></a-cursor>
            </a-camera>
        </a-entity>
        
        <!-- –û–±—ä–µ–∫—Ç—ã –¥–ª—è —Å–±–æ—Ä–∞ -->
        <a-sphere 
            class="collectible" 
            position="-3 1.5 -3" 
            radius="0.5" 
            color="#FF0000" 
            data-value="1"
        ></a-sphere>
        <a-box 
            class="collectible" 
            position="3 0.5 3" 
            width="1" 
            height="1" 
            depth="1" 
            color="#00FF00"
            data-value="1"
        ></a-box>
        <a-cylinder 
            class="collectible" 
            position="0 1 -5" 
            radius="0.5" 
            height="1" 
            color="#0000FF"
            data-value="1"
        ></a-cylinder>
        
        <!-- UI: –°—á–µ—Ç –∏ —Ç–∞–π–º–µ—Ä -->
        <a-text 
            id="score" 
            value="–°—á–µ—Ç: 0" 
            position="-1 3 -3" 
            color="white"
            align="center"
        ></a-text>
        
        <a-text 
            id="timer" 
            value="–í—Ä–µ–º—è: 60" 
            position="1 3 -3" 
            color="white"
            align="center"
        ></a-text>
    </a-scene>
    
    <script>
        // –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã
        let score = 0;
        let timeLeft = 60;
        let gameActive = true;
        
        // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å–±–æ—Ä–∞ –æ–±—ä–µ–∫—Ç–æ–≤
        AFRAME.registerComponent('collectible', {
            init: function () {
                this.el.addEventListener('click', () => {
                    if (!gameActive) return;
                    
                    // –£–¥–∞–ª—è–µ–º –æ–±—ä–µ–∫—Ç
                    this.el.parentNode.removeChild(this.el);
                    
                    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç
                    score += parseInt(this.el.getAttribute('data-value') || 1);
                    document.querySelector('#score').setAttribute('value', '–°—á–µ—Ç: ' + score);
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
                    if (document.querySelectorAll('.collectible').length === 0) {
                        endGame(true);
                    }
                });
            }
        });
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–æ –≤—Å–µ–º –æ–±—ä–µ–∫—Ç–∞–º
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('.collectible').forEach(obj => {
                obj.setAttribute('collectible', '');
            });
        });
        
        // –¢–∞–π–º–µ—Ä
        let timerInterval = setInterval(() => {
            if (!gameActive) return;
            
            timeLeft--;
            document.querySelector('#timer').setAttribute('value', '–í—Ä–µ–º—è: ' + timeLeft);
            
            if (timeLeft <= 0) {
                endGame(false);
            }
        }, 1000);
        
        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
        function endGame(isWin) {
            gameActive = false;
            clearInterval(timerInterval);
            
            let message = isWin ? "üéâ –ü–æ–±–µ–¥–∞! –í—Å–µ –æ–±—ä–µ–∫—Ç—ã —Å–æ–±—Ä–∞–Ω—ã!" : "‚è∞ –í—Ä–µ–º—è –≤—ã—à–ª–æ!";
            let finalScore = "\n–ò—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç: " + score;
            
            // –°–æ–∑–¥–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
            let gameOverText = document.createElement('a-text');
            gameOverText.setAttribute('value', message + finalScore);
            gameOverText.setAttribute('position', '0 2 -2');
            gameOverText.setAttribute('align', 'center');
            gameOverText.setAttribute('color', 'yellow');
            gameOverText.setAttribute('scale', '2 2 2');
            
            // –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
            let restartButton = document.createElement('a-text');
            restartButton.setAttribute('value', '[ –ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ ]');
            restartButton.setAttribute('position', '0 1.5 -2');
            restartButton.setAttribute('align', 'center');
            restartButton.setAttribute('color', '#00FFFF');
            restartButton.setAttribute('class', 'clickable');
            
            restartButton.addEventListener('click', function() {
                location.reload();
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å—Ü–µ–Ω—É
            document.querySelector('a-scene').appendChild(gameOverText);
            document.querySelector('a-scene').appendChild(restartButton);
        }
    </script>
</body>

</html>
